<!DOCTYPE html>
<html>
	<body>
		<p>AJAX exemple.</p>
		<p id="demo"></p>

		<script>
			let xhr = new XMLHttpRequest();//On crée un objet XMLHttpRequest
			
			xhr.open("GET", "https://github.com/bassemSeddik/formationDHL");//On initialise notre requête avec open()
			
			xhr.responseType = "json";//On veut une réponse au format JSON
			
			xhr.send();//On envoie la requête

			xhr.onload = function(){//Dès que la réponse est reçue...
				if (xhr.status != 200){ //Si le statut HTTP n'est pas 200...
					//...On affiche le statut et le message correspondant
					alert("Erreur " + xhr.status + " : " + xhr.statusText);
				//Si le statut HTTP est 200, on affiche le nombre d'octets téléchargés et la réponse
				}else{ 
					alert(xhr.response.length + " octets téléchargés\n" + JSON.stringify(xhr.response));
				}
			};

			xhr.onerror = function(){//Si la requête n'a pas pu aboutir...
				alert("La requête a échoué");
			};

			xhr.onprogress = function(event){//Pendant le téléchargement...
				//lengthComputable = booléen; true si la requête a une length calculable
				if (event.lengthComputable){
					//loaded = contient le nombre d'octets téléchargés
					//total = contient le nombre total d'octets à télécharger
					alert(event.loaded + " octets reçus sur un total de " + event.total);
				}
			};
		</script>
	</body>
</html>